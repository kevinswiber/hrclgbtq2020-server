(self.webpackChunklgbtq_state_equality_index=self.webpackChunklgbtq_state_equality_index||[]).push([[826],{8842:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return c}});var r=n(7294),a=n(1293),i=n(7329),l=(n(6535),n(9244),n(8684));function o(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return u(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var s=function(e){for(var t,n=1024,a=n,u=210,s=Math.min(n,a)/2-25,c=["Northeast","South","West","Midwest"],d={},g={},f=o(e.issues.edges.map((function(e){return e.node})));!(t=f()).done;){var m=t.value;g[m.name]=m.states.map((function(e){return Number(e.value)})).sort(),g[m.name]=(0,i.Z)(new Set(g[m.name])),d[m.id]=m.name}var h=e.states.edges.map((function(e){return e.node})).sort((function(e,t){return l.j2p(c.indexOf(e.region),c.indexOf(t.region))||l.j2p(e.id,t.id)})),p=4.5/h.length*Math.PI*2,y=l.tiA().domain(h.map((function(e){return e.id}))).range([p,2*Math.PI+p]),E=l.Xxj(h,(function(e){return e.region})).map((function(e){var t=e[0],n=e[1],r=y(n[0].id)||0,a=n[n.length-1],i=(y(a.id)||0)+y.bandwidth();return{region:t,startAngle:r,endAngle:i,labelAngle:((r+i)/2-Math.PI/2)%(2*Math.PI)}})),b=["TRANSGENDER_HEALTHCARE","SCHOOL_ANTI_BULLYING","PUBLIC_ACCOMMODATIONS","MARRIAGE_EQUALITY","HOUSING","HATE_CRIMES","GENDER_MARKER_UPDATES_ON_IDENTIFICATION","EMPLOYMENT","EDUCATION","DISCRIMINATION_IN_CHILD_WELFARE","ANTI_CONVERSION_THERAPY"].map((function(e){return d[e]})),A=b.slice(0),I=h.flatMap((function(e){return A.map((function(t){var n=e.issues.find((function(e){return e.name===t}));return{state:e.name,abbreviation:e.id,region:e.region,category:t,status:n?n.policy:"",value:n?n.value:""}}))})),x=l.s$j().domain([0,A.length]).range([u,s]),v=l.Nb1().innerRadius((function(e){return x(b.indexOf(e.category))})).outerRadius((function(e){return x(b.indexOf(e.category)+1)})).startAngle((function(e){return y(e.abbreviation)})).endAngle((function(e){return(y(e.abbreviation)||0)+y.bandwidth()})).padRadius(u),k=l.PKp().domain(A).range(l.Cn1).unknown("rgb(234,234,234)"),w=l.Nb1().innerRadius(190).outerRadius(190).startAngle((function(e){return e.startAngle})).endAngle((function(e){return e.endAngle})),M=function(e,t){return Math.cos(e)*t},N=function(e,t){return Math.sin(e)*t},O=function(e){return e>0&&e<Math.PI};return r.createElement("div",{id:"radial-chart"},r.createElement("svg",{style:{width:"100%",height:"auto",font:"14px sans-serif",padding:"20px"},viewBox:"-512, -512, 1024, 1024",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink"},r.createElement("g",{key:"datapoints"},I.map((function(e){return r.createElement("g",{key:"datapoint-"+e.state+"-"+e.category},r.createElement("path",{d:v(e),stroke:"white",fill:k(e.category),fillOpacity:(g[e.category].indexOf(e.value)+1)/g[e.category].length*.9}),r.createElement("title",null,e.state+": "+e.category+", "+e.status))}))),r.createElement("g",{key:"dividers"},E.map((function(e){return r.createElement("g",{key:"divider-"+e.region,transform:"rotate("+(180*e.startAngle/Math.PI-90)+")"},r.createElement("line",{x1:u,x2:s+30,stroke:"black",strokeWidth:"5"}))}))),r.createElement("g",{key:"region-label-paths"},E.map((function(e){return r.createElement("path",{key:"label-path-"+e.region,d:w(e),id:"sei-chart-"+e.region,stroke:"none"})})),r.createElement("g",{key:"region-label-texts",style:{textTransform:"uppercase"},fill:"#888",textAnchor:"middle"},E.map((function(e){return r.createElement("text",{key:"label-text-"+e.region,transform:O(e.labelAngle)?"translate("+M(e.labelAngle,11)+", "+N(e.labelAngle,11)+")":void 0},r.createElement("textPath",{xlinkHref:"#sei-chart-"+e.region,startOffset:O(e.labelAngle)?"75%":"25%"},e.region))})))),r.createElement("g",{key:"state-labels"},h.map((function(e){return r.createElement("text",{key:"state-label-"+e.id,textAnchor:"middle",fill:"#888",x:M((y(e.id)||0)+y.bandwidth()/2-Math.PI/2,s+16),y:N((y(e.id)||0)+y.bandwidth()/2-Math.PI/2,s+16),dy:"0.31em"},e.id)}))),r.createElement("g",{key:"legend"},A.map((function(e,t){return r.createElement("g",{key:"legend-"+t,transform:"translate(-120,"+20*(t-(A.length-1)/2)+")"},r.createElement("rect",{width:"18",height:"18",fill:k(e)}),r.createElement("text",{style:{font:"11px sans-serif"},x:"24",y:"9",dy:"0.35em"},e))})))))},c=function(e){var t=e.data;return r.createElement("main",null,r.createElement(a.Z,{maxWidth:"md"},r.createElement("h1",null,"State policies on LGBTQ+ issues"),r.createElement(s,t.sei)))}}}]);
//# sourceMappingURL=component---src-pages-states-all-tsx-44510f6c3a829d06011b.js.map